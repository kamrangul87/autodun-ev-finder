"use strict";(()=>{var e={};e.id=905,e.ids=[905],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8011:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>d});var r={};s.r(r),s.d(r,{GET:()=>l,dynamic:()=>u,runtime:()=>p});var n=s(9303),a=s(8716),o=s(3131),i=s(7070);let u="force-dynamic",p="nodejs";async function l(e){let t=new URL(e.url).searchParams,s=function(e){let t=Number(e.get("north")),s=Number(e.get("south")),r=Number(e.get("east")),n=Number(e.get("west"));return![t,s,r,n].every(Number.isFinite)||t<=s||r<=n?null:[t,s,r,n]}(t);if(!s)return i.NextResponse.json({error:"invalid_bbox"},{status:400});let[r,n,a,o]=s;t.get("minPower");let u=t.get("conn");u&&u.split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);let p=new URLSearchParams({boundingbox:`${n},${o},${r},${a}`,compact:"true",maxresults:"1000",output:"json"}),l=process.env.OCM_API_KEY,c={};l&&(c["X-API-Key"]=l);let m=null,d=`https://api.openchargemap.io/v3/poi/?${p.toString()}`,x=null,g=null,h=[];try{let e=await fetch(d,{headers:c,cache:"no-store",next:{revalidate:0}});if(!e.ok)return x=`OCM ${e.status}`,g=await e.text(),i.NextResponse.json({error:x,detail:g,items:[]},{status:e.status});try{m=await e.json()}catch(t){return x="OCM_BAD_JSON",g=await e.text(),i.NextResponse.json({error:x,detail:g,items:[]},{status:502})}if(!Array.isArray(m))return x="OCM_BAD_JSON",g=m,i.NextResponse.json({error:x,detail:g,items:[]},{status:502});if(0===m.length)return x="NO_STATIONS",g={ocmURL:d},i.NextResponse.json({error:x,detail:g,items:[]},{status:200});return h=m,i.NextResponse.json({items:h},{status:200})}catch(e){return x=e?.message||"OCM_FETCH_ERROR",g=String(e),i.NextResponse.json({error:x,detail:g,items:[]},{status:502})}}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/stations/route",pathname:"/api/stations",filename:"route",bundlePath:"app/api/stations/route"},resolvedPagePath:"/workspaces/autodun-ev-finder/app/api/stations/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:x}=c,g="/api/stations/route";function h(){return(0,o.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972],()=>s(8011));module.exports=r})();