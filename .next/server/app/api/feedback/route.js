"use strict";(()=>{var e={};e.id=573,e.ids=[573],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5935:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>f,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>d,POST:()=>c,dynamic:()=>p,runtime:()=>o});var a=r(9303),i=r(8716),s=r(3131);let o="nodejs",p="force-dynamic";function u(){let e=globalThis;return e.__feedbackStore||(e.__feedbackStore={}),e.__feedbackStore}async function c(e){try{let t=await e.json(),r=Number(t?.stationId),n=Number(t?.rating),a="string"==typeof t?.comment?String(t.comment).trim():void 0;if(!Number.isFinite(r)||!(n>=0&&n<=5))return new Response(JSON.stringify({error:"Invalid stationId or rating"}),{status:400,headers:{"content-type":"application/json"}});let i=u();return i[r]||(i[r]=[]),i[r].push({rating:n,comment:a,timestamp:Date.now()}),new Response(JSON.stringify({success:!0}),{status:200,headers:{"content-type":"application/json"}})}catch(e){return console.error(e),new Response(JSON.stringify({error:"Failed to store feedback"}),{status:500,headers:{"content-type":"application/json"}})}}async function d(e){try{let t=e.nextUrl.searchParams,r=Number(t.get("stationId"));if(!Number.isFinite(r))return new Response(JSON.stringify({error:"Missing or invalid stationId"}),{status:400,headers:{"content-type":"application/json"}});let n=u()[r]??[],a=n.length,i=a?n.reduce((e,t)=>e+t.rating,0)/a:null;return new Response(JSON.stringify({count:a,averageRating:i,reliability:"number"==typeof i?i/5:null}),{status:200,headers:{"content-type":"application/json"}})}catch(e){return console.error(e),new Response(JSON.stringify({error:"Failed to fetch feedback"}),{status:500,headers:{"content-type":"application/json"}})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/feedback/route",pathname:"/api/feedback",filename:"route",bundlePath:"app/api/feedback/route"},resolvedPagePath:"/workspaces/autodun-ev-finder/app/api/feedback/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:g}=l,y="/api/feedback/route";function h(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948],()=>r(5935));module.exports=n})();